$(document).ready(function(){$(document.body).transition("init").show()});(function(h){var m=0,n=false,e=null,g={},k=window.location.href,c={},f=null,j=[],l=0;var d={options:function(o){e=h.extend({defaultPageTransition:"fade",domCache:false},o)},init:function(r,u,t){if(!n){n=true;h(document.body).transition("options",{});h(window).on("hashchange",function(A){var z=(f&&f.element)||h(document.body);if(!c[window.location.hash]){var D=window.location.hash;var C=h("div.ui-page-active").attr("id");if(C){C="#"+C}if(f&&f.element&&f.element.is("form")){D={type:f.element.attr("method")||"get",url:window.location.hash.slice(1),data:f.element.serialize(),dataType:"html",global:false}}var B=null;var w=f==null;var y=0;if(w){if(l<j.length&&j[l].to==D){f=j[l++];w=false}else{if(l>0){f=j[--l];w=f?!f.reverse:true}}B=f?f.transition:e.defaultPageTransition;if(f){y=f.top||0;if(!D&&h(f.from).length){D=f.from}}}else{if(f.transition){B=f.transition;j[l++]={to:D,from:C,transition:B,top:h(window).scrollTop()};w=f.reverse}else{B=f.element.attr("transition")||f.element.data("transition")||e.defaultPageTransition;var x=f.element.attr("direction")||f.element.data("direction");if(x==="reverse"){w=true}j[l++]={to:D,from:C,transition:B,reverse:w,top:h(window).scrollTop()}}}z.transition("changePage",D,B,w,y)}f=null})}var o=h('div[data-role="page"]',this);if(!o.length){if(this.is("div")){this.attr("data-role","page");this.attr("id","_trans_div"+m);o=this}else{o=h('<div data-role="page" id="_trans_div'+m+'" />');this.children().wrapAll(o)}}if(r){o.trigger("pageload",r)}var p=o.first();if(window.location.hash){p=h(b(window.location.hash));if(!p.length){p=o.first();var q=p.attr("id");var v=b(g[window.location.hash]||window.location.hash.slice(1));p.attr("id",v);if(q){h('[data-href="#'+q+'"]',o).attr("data-href","#"+v);h('[href="#'+q+'"]',o).attr("href","#"+v)}}}o.addClass("ui-page");o.each(function(){if(!h(this).attr("id")){h(this).attr("id","_trans_div"+m)}g["#"+h(this).attr("id")]=k;h(this).css("zIndex",m++)});h("a[href]",o).not("[target]").not('[rel="external"]').not('[data-ajax="false"]').not("[data-href]").transition("hijackLinks");h("[data-href]",o).transition("hijackLinks");h("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks");if(!t){t=document.title}o.not("[data-title]").data("title",t);t=p.data("title");if(t){document.title=t}o.hide();var s=u?h(u):null;s=s||p;s.addClass("ui-page-active");o.each(function(){h(this).trigger("pageinit",h(this))});return s},to:function(p,q,o){q=q||e.defaultPageTransition;if(!o){o=false}f={transition:q,reverse:o};window.location.hash="#"+p},hijackLinks:function(){return this.each(function(){var q=h(this);if(q.data("rel")=="back"){var p=function(r){window.history.back();r.preventDefault()};q.on("click",p);q.on("tap",p);return}var o=q.attr("data-href")||q.attr("href")||q.attr("action")||"#";if(o.charAt(0)==="#"){if(h('a[name="'+o.slice(1)+'"]').length){c[o]=true;return}}else{o="#"+o;if(q.is("a")){q.attr("href",o)}else{if(q.attr("action")){q.attr("action",o)}}if(q.attr("data-href")){q.attr("data-href",o)}}var p;if(q.is("a")){p=function(r){f={element:q}}}else{if(q.is("form")){p=function(r){f={element:q};window.location.href=o;r.preventDefault()};q.on("submit",p)}else{p=function(r){f={element:q};window.location.href=o}}}if(!q.is("form")){q.on("click",p);q.on("tap",p)}})},changePage:function(w,t,q,u){var A={toPage:w,back:q};var s=h.Event("pagebeforechange");h(this).trigger(s,A);if(s.defaultPrevented){return}else{w=A.toPage;q=A.back}var o=typeof w==="string"?w:w.url;var z=null;var v=h("div.ui-page-active");var r=false;if((typeof w==="string")&&w.charAt(0)==="#"){var y=h(b(w));if(y.length){h(this).transition("perform",v,y,t,q,u,A);r=true}else{if(!e.domCache&&g[w]){z=w;w=g[w]}else{w=w.slice(1)}}}if(!r){var x={href:o,element:h(this),back:q};var s=h.Event("pagebeforeload");h(this).trigger(s,x);var p=h(this);if(!s.defaultPrevented){h(this).transition("load",w,x,function(C,B,D){var F=h('<div data-role="page-container" />');F.html(C);h(document.body).append(F);var E=h(F).transition("init",x,z,D);h(p).transition("perform",v,E,t,q,u,A)});r=true}}if(!r){h(this).trigger("pagechangefailed",A)}},load:function(p,o,q){p=typeof p==="string"?{url:p,dataType:"html",global:false}:p;if(!p.url){p.url=window.location.href}p.success=function(s,y,x){o.xhr=x;o.textStatus=y;k=p.url;if(!e.domCache){h('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable")}var v=s.search(/<body/i);var u=s;var r=s;var w;if(v!=-1){u=s.slice(0,v);v=s.indexOf(">",v);bodyEnd=s.search(/<\/body>/i);r=s.slice(v+1,bodyEnd)}var t=u.match(/<title>(.+)<\/title>/im);if(t){w=t[1]}r=a(r);q(r,s,w)};p.error=function(s,t,r){o.xhr=s;o.textStatus=t;o.errorThrown=r;h(this).trigger("pageloadfailed",o);h(this).trigger("pagechangefailed",{toPage:p.url})};h.ajax(p)},perform:function(t,s,r,o,q,p){p.from=t;p.to=s;t.trigger("pagebeforehide",t);s.trigger("pagebeforeshow",s);window.setTimeout(function(){t.addClass(r+" out");t.removeClass("ui-page-active");var u=s.position();s.css({top:u.top-q});s.show();s.addClass(r+" in");s.addClass("ui-page-active");if(o){t.addClass("reverse");s.addClass("reverse")}},1);window.setTimeout(function(){t.removeClass(r+" out");s.removeClass(r+" in");t.removeClass("reverse");s.removeClass("reverse");s.css({top:0});window.scrollTo(0,q);var u=s.data("title");if(u){document.title=u}t.trigger("pagehide",t);s.trigger("pageshow",s);h(document).trigger("pagechange",p);h('div[data-role="page"]').hide();s.show();if(!e.domCache){h("div.transition-recyclable").each(function(){var v=h.Event("pageremove");h(this).trigger(v,h(this));if(!v.defaultPrevented){h(this).remove()}});h('div[data-role="page-container"]').not(function(){return h(this).children().length}).remove()}},707)}};h.fn.transition=function(o){if(d[o]){return d[o].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof o==="object"||!o){return d.to.apply(this,arguments)}else{throw"Method "+o+" does not exist"}}};function b(o){var p=o.indexOf("?");if(p>0){o=o.slice(0,p)}return o.replace(/[:\.\+\/]/g,"_")}function a(o){if(window.location.hash){var p=i(window.location.pathname,window.location.hash.slice(1));if(p.length){o=o.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+p+'$3"');o=o.replace(/(\b(src|href|action))="(.+\/)?[^\/]+\/\.\.\//gi,'$1="$3')}}return o}function i(s,r){var q="";var p=r.lastIndexOf("/");if(p!=-1){q=r.slice(0,p+1);if(q.charAt(0)=="/"){if(!s.charAt(0)=="/"){s="/"+s}var t=1;p=t;do{p=q.indexOf("/",p)+1;if(p>t&&q.slice(0,p)==s.slice(0,p)){t=p}}while(p>0&&p==t);var o="";p=t;do{p=s.indexOf("/",p+1);if(p!=-1){o+="../"}}while(p!=-1);q=o+q.slice(t)}}return q}})(Zepto);